# Shell Scripting

---

## **21. Difference between `[ ]` and `[[ ]]`

### **Scenario**

You are comparing strings and want to avoid issues with spaces or special chars.

### **Explanation**

* `[ ]` → traditional test, POSIX, limited
* `[[ ]]` → bash advanced test, supports regex, safer

Example:

```bash
if [[ $env == prod ]]; then
    echo "Production"
fi
```

### **Interview**

“In real scripts, I prefer `[[ ]]` because it handles spaces and patterns more safely.”

---

## **22. How to comment a block in bash?

### **Scenario**

You temporarily disable part of a large script during debugging.

### **Explanation**

Bash has no official block comment, but you can use **here-doc** style:

```bash
: << 'EOF'
echo "This whole block won't run"
echo "Debugging mode"
EOF
```

### **Interview**

“I use here-doc trick to comment large blocks without deleting them.”

---

## **23. How to append to a file?

### **Scenario**

You want to store application logs without overwriting the file.

```bash
echo "Deployment completed at $(date)" >> deploy.log
```

### **Interview**

“I use >> very often in cron scripts and pipeline logs.”

---

## **24. Difference between && and ||**

### **Scenario**

Run next step only if docker image build succeeds:

```bash
docker build . && docker push myapp
```

Run fallback step if build fails:

```bash
docker build . || echo "Build failed!"
```

### **Interview**

“I use && for chaining success commands and || for fallback or error handling.”

---

## **25. How to make a script executable?**

### **Scenario**

You created a script called `backup.sh`.

```bash
chmod +x backup.sh
```

Run:

```bash
./backup.sh
```

### **Interview**

“In production, I ensure scripts are executable and owned by proper users for security.”

---

## **26. How to get length of a string?**

### **Scenario**

Check if username meets minimum length.

```bash
len=${#username}
```

### **Interview**

“I use string length checks for validations inside automation scripts.”

---

## **27. How to slice a string in bash?**

### **Scenario**

Extract year from a timestamp `2024-08-12`.

```bash
year=${date:0:4}
```

General syntax:

```bash
${string:start:length}
```

### **Interview**

“I use slicing to extract parts of filenames or timestamps while processing logs.”

---

## **28. Declare arrays and loop through them**

### **Scenario**

You want to restart multiple services.

```bash
services=(nginx mysql redis)

for s in "${services[@]}"; do
    systemctl restart "$s"
done
```

### **Interview**

“Arrays are helpful for looping through server lists, services, or file paths.”

---

## **29. Capture command output into a variable**

### **Scenario**

Store today's date in a variable.

```bash
today=$(date +%F)
```

Or:

```bash
ip=$(hostname -I | awk '{print $1}')
```

### **Interview**

“In automation, I often store dynamic values like IPs, timestamps, disk usage.”

---

## **30. What is read command used for?**

### **Scenario**

Take user input for environment selection.

```bash
read -p "Enter environment: " env
```

### **Interview**

“I use read for interactive scripts or for reading from files line by line.”

---

## **31. Write a script to monitor a process**

### **Scenario**

Monitor if Tomcat is running; restart if not.

```bash
process="tomcat"

if ! pgrep -x "$process" >/dev/null; then
    echo "Tomcat down! Restarting..."
    systemctl start tomcat
fi
```

### **Interview**

“This type of monitoring script is very common in legacy servers without Prometheus.”

---

## **32. Use of getopts in command-line parsing**

### **Scenario**

A script accepts flags like `-e dev -v v1`.

```bash
while getopts "e:v:" opt; do
  case $opt in
    e) env=$OPTARG ;;
    v) version=$OPTARG ;;
  esac
done
```

### **Interview**

“I use getopts in production scripts for clean and professional CLI design.”

---

## **33. What are here-documents?**

### **Scenario**

You want to write a multi-line config file from a script.

```bash
cat <<EOF > config.txt
server=10.0.0.1
port=8080
EOF
```

### **Interview**

“Here-docs help me generate config files dynamically inside automation scripts.”

---

## **34. Replace text in a file using sed**

### **Scenario**

Replace old version with new version in config file.

```bash
sed -i 's/version=1.0/version=2.0/' app.conf
```

### **Interview**

“sed is essential for updating configs, URLs, versions, ports during deployments.”

---

## **35. Count lines in a file**

### **Scenario**

Check log size by number of lines.

```bash
wc -l /var/log/messages
```

Or store:

```bash
lines=$(wc -l < logfile)
```

### **Interview**

“I use this for log monitoring and threshold alerts.”

---

## **36. Use of basename and dirname**

### **Scenario**

File path:
/var/www/html/index.php

```bash
basename /var/www/html/index.php   # index.php
dirname /var/www/html/index.php    # /var/www/html
```

### **Interview**

“These commands help extract filename or directory when manipulating paths.”

---

## **37. Remove whitespace from a variable**

### **Scenario**

User input contains spaces.

```bash
clean=$(echo "$var" | xargs)
```

Or remove all spaces:

```bash
clean=${var// /}
```

### **Interview**

“I use this when handling usernames, API responses, or config values.”

---

## **38. How to split a string by delimiter**

### **Scenario**

Split CSV data:

```bash
IFS=',' read -r name age city <<< "John,25,Hyderabad"
```

### **Interview**

“This helps in parsing files, APIs, CSVs in shell.”

---

## **39. Write logs to a log file**

### **Scenario**

Append deployment logs:

```bash
echo "$(date) - Deployment started" >> /var/log/myapp.log
```

Redirect entire script:

```bash
exec >> /var/log/myapp.log 2>&1
```

### **Interview**

“Every production script I write includes logging for debugging.”

---

## **40. Check if a command exists**

### **Scenario**

Ensure docker is installed before deployment.

```bash
if ! command -v docker >/dev/null; then
    echo "Docker not installed"
fi
```

### **Interview**

“This is important in bootstrapping scripts where dependencies must be verified.”
