# Scenario-Based Shell Scripting

# **13. Monitor SSL Certificate Expiration**

### **Scenario**

You want to alert before SSL expiry (critical for production sites).

### **Script**

```bash
end_date=$(openssl s_client -connect myapp.com:443 -servername myapp.com < /dev/null 2>/dev/null \
         | openssl x509 -noout -enddate | cut -d= -f2)
echo "SSL expires on: $end_date"
```

### **Interview**

“I extract the SSL end date using openssl and alert if < 15 days.”

---

# **14. Parse log file and count failed logins**

### **Scenario**

Security team asks for number of SSH failed login attempts.

### **Script**

```bash
grep "Failed password" /var/log/auth.log | wc -l
```

### **Interview**

“I filter logs using grep and count failures using wc.”

---

# **15. Report users with UID > 1000**

### **Scenario**

Check normal (non-system) users on system.

### **Script**

```bash
awk -F: '$3 > 1000 {print $1}' /etc/passwd
```

### **Interview**

“I parse /etc/passwd to extract real login users.”

---

# **16. Find and kill zombie processes**

### **Scenario**

Zombie processes eating system resources.

### **Script**

```bash
ps aux | awk '$8=="Z" {print $2}' | xargs -r kill -9
```

### **Interview**

“I detect processes with state 'Z' and force kill them.”

---

# **17. Compare two directories for differences**

### **Scenario**

Find files missing between two servers' deployments.

### **Script**

```bash
diff -qr dir1/ dir2/
```

### **Interview**

“I use diff to find mismatched files or changed content.”

---

# **18. Monitor network bandwidth in real-time**

### **Scenario**

Need to check traffic usage.

### **Script**

```bash
iftop -n
```

OR:

```bash
sar -n DEV 1
```

### **Interview**

“I use iftop/sar for real-time network monitoring.”

---

# **19. Create users from CSV file**

### **Scenario**

Bulk user creation requested by HR.

**CSV file sample:**

```
john,1001
ram,1002
```

### **Script**

```bash
while IFS=',' read user uid; do
    useradd -u $uid $user
done < users.csv
```

### **Interview**

“I automate account creation using useradd and CSV parsing.”

---

# **20. Alert if a Docker container is not running**

### **Scenario**

Ensure critical container stays up.

### **Script**

```bash
if ! docker ps --format '{{.Names}}' | grep -q myapp; then
    echo "Container down!" | mail -s "Docker Alert" admin@example.com
fi
```

### **Interview**

“I automate container health checks by reading docker ps output.”

---

# **21. Auto-deploy a static site using rsync**

### **Scenario**

Deploy static HTML files to a remote server.

### **Script**

```bash
rsync -avz site/ user@server:/var/www/html/
```

### **Interview**

“I use rsync for efficient deployments — only changed files sync.”

---

# **22. Automate git pull and restart service**

### **Scenario**

CI/CD not available → simple automation needed.

### **Script**

```bash
cd /opt/myapp
git pull
systemctl restart myapp
```

### **Interview**

“This is a lightweight code update script before full CI/CD adoption.”

---

# **23. Generate dynamic inventory file for Ansible**

### **Scenario**

Your server list is in servers.txt; Ansible needs JSON.

### **Script**

```bash
echo "{ \"all\": { \"hosts\": [" > inventory.json
awk '{print "\""$1"\","}' servers.txt >> inventory.json
echo "]}}" >> inventory.json
```

### **Interview**

“I convert raw server lists into Ansible inventory JSON dynamically.”

---

# **24. Validate YAML/JSON files**

### **Scenario**

Developers push broken YAML, breaking deployments.

### **Script**

```bash
yamllint file.yaml
jq . file.json >/dev/null 2>&1
```

### **Interview**

“I use yamllint/jq to validate configs before deployment.”

---

# **25. Parse Jenkins job status via API and alert if failed**

### **Scenario**

Monitor Jenkins job failures automatically.

### **Script**

```bash
status=$(curl -s http://jenkins/job/myjob/lastBuild/api/json | jq -r '.result')

if [ "$status" != "SUCCESS" ]; then
    echo "Job failed!" | mail -s "Jenkins Alert" admin@example.com
fi
```

### **Interview**

“I read Jenkins job status via API and send alerts for failure or unstable states.”
